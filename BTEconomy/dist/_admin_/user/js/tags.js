$(function(){function t(t){$.ajax({type:"get",url:"http://www.lopkj.cn:8111/lampconsole/selectBall.action?page="+t,success:function(t){var n=JSON.parse(t);a(n.bList),e(n)}})}function a(t){if("object"==typeof t&&Array.isArray(t)){for(var a="",e=0,n=t.length;e<n;e++)a+='<tr class=""><td style="" class="">'+(e+1)+'</td><td style="" class="">'+t[e].name+'</td><td style="" class=""><a class="table_operate"><span class="edit-tag label label-success mr-5 trans" data-di='+t[e].id+'>编辑</span></a><a class="table_operate"><span class="delete-tag label label-danger mr-5" data-di='+t[e].id+">删除</span></a></td></tr>";$(".tagsWrapper").find("tbody").html(a)}}function e(a){var e={currentPage:a.page,totalPages:a.zong,numberOfPages:5,onPageClicked:function(a,e,n,l){t(l)}};$("#pg").bootstrapPaginator(e)}document.cookie.split(";").some(function(t){if(t)return"name"==t.split("=")[0]})||(window.location.href="./login.html"),t(1),$(".js-addTag").on("click",function(){var a=$("#addcl1").find("input[type=text]").val().trim();if(!a)return alert("请输入标签名"),!1;$.ajax({type:"post",url:"http://www.lopkj.cn:8111/lampconsole/creatBall.action",data:"name="+a,success:function(a){"success"===JSON.parse(a).state?(t(1),$("#addcl1").modal("hide")):alert("添加失败！")}})}),$(".tagsWrapper").on("click",function(a){var e=a.srcElement?a.srcElement:a.target;if("SPAN"===e.nodeName&&$(e).is(".edit-tag")){var n=$(e).parent().parent().prev().text(),l=$(e).attr("data-di");$("#editTag").find("input[type=text]").val(n).attr("data-di",l),$("#editTag").modal("show"),$("#editTag").find(".js-editTag").unbind("click"),$("#editTag").find(".js-editTag").on("click",function(){var a={id:l,name:$("#editTag").find("input[type=text]").val()};$.ajax({type:"POST",url:"http://www.lopkj.cn:8111/lampconsole/updateBall.action",data:a,success:function(a){"success"===JSON.parse(a).state?(t(1),$("#editTag").modal("hide")):alert("更新失败！")}})})}if("SPAN"===e.nodeName&&$(e).is(".delete-tag")){var s=$(e).attr("data-di");confirm("确认删除？")&&$.ajax({type:"get",url:"http://www.lopkj.cn:8111/lampconsole/deleteBall.action?id="+s,success:function(a){t(1)}})}})});
//# sourceMappingURL=tags.js.map
