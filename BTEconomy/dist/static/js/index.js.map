{"version":3,"sources":["index.js"],"names":["initColumns","jsonpCallbackp","msg","data","bList","str","i","length","cs","id","columnid","name","$","append","aid","window","location","href","split","ajax","type","url","dataType","jsonp","jsonpCallback","success","initArticles","num","jsonpCallbackw","totalPages","zong","rendArticles","wList","len","tagStr","time","Math","floor","Date","parse","date","replace","res","ceil","bl","j","l","substr","pic","fname","userr","getBanners","jsonpCallbacka","rendBanners","jList","attr","httpss","text","each","this","find","getHotPeos","jsonpCallbacksp","rendHotPeos","html","getHotArticles","jsonpCallback1","rendHotArticles","initTags","pageNum","jsonpCallbackb","rendTag","Array","isArray","curPage","on","css"],"mappings":"AAaI,SAASA,cAqBP,SAASC,EAAeC,GAGjB,IAFDC,EAAOD,EAAIE,MACXC,EAAM,GACDC,EAAI,EAAb,IAAsBH,EAAKI,OAAQD,EAAI,EAAGA,IAAK,CAC7C,IAAIE,EAAKL,EAAKG,GAAGG,IAAMC,EAAW,UAAU,GAC5CL,GAAQ,eAAeC,EAAE,GAAG,6BAA6BH,EAAKG,GAAGG,GAAG,YAAYD,EAAG,IAAIL,EAAKG,GAAGK,KAAK,OAEtGC,EAAE,aAAaC,OAAOR,GA3BxB,IAAIK,EAEAI,EADMC,OAAOC,SAASC,KACZC,MAAM,KAAK,GACrBJ,IACFA,EAAMA,EAAII,MAAM,KAAK,IAEnBJ,GAA2B,aAApBA,EAAII,MAAM,KAAK,KACxBR,EAAWI,EAAII,MAAM,KAAK,IAE5BN,EAAEO,MACAC,KAAM,MACNC,IAAK,4DACLC,SAAS,QACTC,MAAO,WACPC,cAAe,iBACfC,QAAS,SAAUvB,GACjBD,EAAeC,MAcrB,SAASwB,aAAaC,GAWpB,SAASC,EAAe1B,GACtB2B,WAAa3B,EAAI4B,KAEjBC,aADW7B,EAAI8B,OAZjBpB,EAAEO,MACAC,KAAM,MACNC,IAAK,mEAAmEM,EACxEL,SAAS,QACTC,MAAO,WACPC,cAAe,iBACfC,QAAS,SAAUvB,GACjB0B,EAAe1B,MAUrB,SAAS6B,aAAa5B,GAEpB,IAAK,IADDE,EAAM,GACDC,EAAI,EAAG2B,EAAM9B,EAAKI,OAAQD,EAAI2B,EAAK3B,IAAK,CAC/C,IAAI4B,EAAS,GACTC,EAAOC,KAAKC,OAAO,IAAIC,KAASA,KAAKC,MAAMpC,EAAKG,GAAGkC,KAAKtB,MAAM,KAAK,GAAGuB,QAAQ,KAAK,OAAO,MAC1FC,EAAMP,EAAO,GAAKA,EAAK,MAAQC,KAAKO,KAAKR,EAAO,IAAI,KACpDA,EAAO,IACTO,EAAMN,KAAKC,OAAQ,IAAIC,KAASA,KAAKC,MAAMpC,EAAKG,GAAGkC,KAAKtB,MAAM,KAAK,GAAGuB,QAAQ,KAAK,OAAO,IAAM,IAAI,OAEtG,IAAIG,EAAKzC,EAAKG,GAAGF,MACjB,IAAKyC,EAAI,EAAGC,EAAIF,EAAGrC,OAAQsC,EAAIC,EAAGD,IAChCX,GAAU,yBAAyBU,EAAGC,GAAGpC,GAAG,WAAWmC,EAAGC,GAAGlC,KAAK,sBAEpEuB,EAASA,EAAOa,OAAO,EAAGb,EAAO3B,OAAO,GACxCF,GAAO,qGACoEF,EAAKG,GAAGG,GAAG,cAAcN,EAAKG,GAAG0C,IAAI,mGAEpC7C,EAAKG,GAAGG,GAAG,KAAKN,EAAKG,GAAGK,KAAK,gCAC1ER,EAAKG,GAAG2C,MAAM,oDAEN9C,EAAKG,GAAG4C,MAAM,KAAK/C,EAAKG,GAAG4C,MAAM,qBACrDR,EAAI,4BACQR,EAAO,2BAGxCtB,EAAE,gBAAgBC,OAAOR,GAG3B,SAAS8C,aAWP,SAASC,EAAelD,GAEtBmD,YADWnD,EAAIoD,OAXjB1C,EAAEO,MACAC,KAAM,MACNC,IAAK,6DACLC,SAAS,QACTC,MAAO,WACPC,cAAe,iBACfC,QAAS,SAAUvB,GACjBkD,EAAelD,MAQrB,SAASmD,YAAYlD,GACnBS,EAAE,yBAAyB2C,KAAK,OAAOpD,EAAK,GAAGqD,QAC/C5C,EAAE,2BAA2B2C,KAAK,MAAMpD,EAAK,GAAG6C,KAChDpC,EAAE,0BAA0B6C,KAAKtD,EAAK,GAAGQ,MACzCC,EAAE,2BAA2B8C,KAAK,SAASpD,GACzCM,EAAE+C,MAAMJ,KAAK,OAAQpD,EAAKG,EAAE,GAAGkD,QAC/B5C,EAAE+C,MAAMC,KAAK,OAAOL,KAAK,MAAMpD,EAAKG,EAAE,GAAG0C,KACzCpC,EAAE+C,MAAMC,KAAK,MAAMH,KAAKtD,EAAKG,EAAE,GAAGK,QAItC,SAASkD,aAWL,SAASC,EAAgB5D,GAEvB6D,YADW7D,EAAIoD,OAXjB1C,EAAEO,MACAC,KAAM,MACNC,IAAK,gEACLC,SAAS,QACTC,MAAO,WACPC,cAAe,kBACfC,QAAS,SAAUvB,GACjB4D,EAAgB5D,MAQxB,SAAS6D,YAAY5D,GAEnB,IAAK,IADDE,EAAM,GACDC,EAAI,EAAG2B,EAAM9B,EAAKI,OAAQD,EAAI2B,EAAK3B,IACxCD,GAAO,+BAA+BF,EAAKG,GAAGkD,OAAO,aAAarD,EAAKG,GAAG0C,IAAI,aAElFpC,EAAE,uBAAuBoD,KAAK3D,GAGhC,SAAS4D,iBAWL,SAASC,EAAehE,GAEtBiE,gBADWjE,EAAI8B,OAXjBpB,EAAEO,MACAC,KAAM,MACNC,IAAK,6DACLC,SAAS,QACTC,MAAO,WACPC,cAAe,iBACfC,QAAS,SAAUvB,GACjBgE,EAAehE,MAQvB,SAASiE,gBAAgBhE,GAEvB,IAAK,IADDE,EAAM,GACDC,EAAI,EAAG2B,EAAM9B,EAAKI,OAAQD,EAAI2B,EAAK3B,IACxCD,GAAO,wDAAwDF,EAAKG,GAAGG,GAAG,cAAcN,EAAKG,GAAG0C,IAAI,QAAQ7C,EAAKG,GAAGK,KAAK,iBAE7HC,EAAE,yBAAyBoD,KAAK3D,GAGlC,SAAS+D,SAASC,GAWhB,SAASC,EAAepE,GAEpBqE,QADWrE,EAAIE,OAXlBQ,EAAEO,MACCC,KAAM,MACNC,IAAK,+DAA+DgD,EACpE/C,SAAS,QACTC,MAAO,WACPC,cAAe,iBACfC,QAAS,SAAUvB,GAChBoE,EAAepE,MASxB,SAASqE,QAAQpE,GACf,GAAoB,iBAATA,GAAsBqE,MAAMC,QAAQtE,GAA/C,CAIA,IAAK,IADDE,EAAM,GACDC,EAAI,EAAG2B,EAAM9B,EAAKI,OAAQD,EAAI2B,EAAK3B,IAC1CD,GAAQ,yCAAyCF,EAAKG,GAAGG,GAAG,KAAKN,EAAKG,GAAGK,KAAK,OAEhFC,EAAE,qBAAqBoD,KAAK3D,IA9L9B,IAAIqE,QAAU,EACV7C,WAEJjB,EAAE,uBAAuB+D,GAAG,QAAS,YACnCD,SAAoB,IACL7C,WACbH,aAAagD,SACJA,QAAU7C,aACnBjB,EAAE,WAAWgE,IAAI,UAAU,SAC3BhE,EAAE,iBAAiBgE,IAAI,UAAU","file":"index.js","sourcesContent":["    var curPage = 1;\n    var totalPages;\n    // 加载更多\n    $('.more .moreArticles').on('click', function(){\n      curPage = curPage + 1;\n      if (curPage <= totalPages) {\n        initArticles(curPage);  \n      } else if (curPage > totalPages) {\n        $('.noMore').css('display','block');\n        $('.moreArticles').css('display','none');\n      }\n    })\n     // 进入页面获取Columns数据并更新列表\n    function initColumns() {\n      var columnid;\n      var url = window.location.href;\n      var aid = url.split('?')[1];\n      if (aid) {\n        aid = aid.split('&')[0]\n      }\n      if (aid && aid.split('=')[0]==='columnId') {\n        columnid = aid.split('=')[1];\n      }\n      $.ajax({\n        type: 'get',\n        url: 'http://www.lopkj.cn:8111/lampconsole/selectProject.action',\n        dataType:\"jsonp\",\n        jsonp: \"callback\",\n        jsonpCallback: 'jsonpCallbackp',\n        success: function (msg) {\n          jsonpCallbackp(msg);\n        }\n      })\n\n      function jsonpCallbackp(msg) {\n        var data = msg.bList;\n        var str = '';\n        for (var i = 0, len = data.length; i < 3; i++) {\n          var cs = data[i].id == columnid ? \"current\":\"\";\n          str +=  '<a data-id='+(i+1)+' href=\"tags.html?columnId='+data[i].id+'\"  class='+cs+'>'+data[i].name+'</a>'\n        }\n        $('.head-nav').append(str);\n      }\n    }\n    function initArticles(num) {\n      $.ajax({\n        type: 'get',\n        url: 'http://www.lopkj.cn:8111/lampconsole/selectAllWords.action?page='+num,\n        dataType:\"jsonp\",\n        jsonp: \"callback\",\n        jsonpCallback: 'jsonpCallbackw',\n        success: function (msg) {\n          jsonpCallbackw(msg)\n        }\n      })\n      function jsonpCallbackw(msg) {\n        totalPages = msg.zong;\n        var data = msg.wList;\n        rendArticles(data);\n      }\n    }\n     // 渲染文章列表\n    function rendArticles(data) {\n      var str = '';\n      for (var i = 0, len = data.length; i < len; i++) {\n        var tagStr = '';\n        var time = Math.floor((new Date() - Date.parse(data[i].date.split('.')[0].replace(/-/g,\"/\")))/3600000);\n        var res = time < 24 ? time+'小时前' : Math.ceil(time / 24)+'天前';\n        if (time < 1) {\n          res = Math.floor(((new Date() - Date.parse(data[i].date.split('.')[0].replace(/-/g,\"/\")))/1000)/60)+'分钟前';\n        }\n        var bl = data[i].bList;\n        for (j = 0, l = bl.length; j < l; j++) {\n          tagStr += '<a href=\"tags.html?id='+bl[j].id+'\"><span>'+bl[j].name+'</span></a><i>·</i>';\n        }\n        tagStr = tagStr.substr(0, tagStr.length-8);\n        str += '<div class=\"articleItem clearfix\">'+\n                '<div class=\"img\"><a target=\"_blank\" href=\"articleDetail.html?id='+data[i].id+'\"><img src='+data[i].pic+'></a></div>'+\n                '<div class=\"detail\">'+\n                '<h3 class=\"title\"><a target=\"_blank\" href=\"articleDetail.html?id='+data[i].id+'\">'+data[i].name+'</a></h3>'+\n                '<p class=\"subTitle\">'+data[i].fname+'</p>'+\n                '<div class=\"about\">'+\n                  '<a href=\"column.html?name='+data[i].userr+'\">'+data[i].userr+'</a><i>·</i>'+\n                  '<span>'+res+'</span>'+\n                  '<div class=\"tags\">'+tagStr+'</div>'+\n                '</div></div></div>'\n      }\n      $('.articleList').append(str);\n    }\n    // 获取栏目列表数据并渲染\n    function getBanners() {\n      $.ajax({\n        type: 'get',\n        url: 'http://www.lopkj.cn:8111/lampconsole/selectAllJdpic.action',\n        dataType:\"jsonp\",\n        jsonp: \"callback\",\n        jsonpCallback: 'jsonpCallbacka',\n        success: function (msg) {\n          jsonpCallbacka(msg)\n        }\n      })\n      function jsonpCallbacka(msg) {\n        var data = msg.jList;\n        rendBanners(data);\n      }\n    }\n    function rendBanners(data) {\n      $('.banner .leftBanner a').attr('href',data[0].httpss)\n      $('.banner .leftBanner img').attr('src',data[0].pic)\n      $('.banner .leftBanner h3').text(data[0].name)\n      $('.banner .rightBanners a').each(function(i) {\n        $(this).attr('href', data[i+1].httpss);\n        $(this).find('img').attr('src',data[i+1].pic);\n        $(this).find('h3').text(data[i+1].name);\n      })\n    }\n     // 获取热门人物列表数据并渲染\n    function getHotPeos() {\n        $.ajax({\n          type: 'get',\n          url: 'http://www.lopkj.cn:8111/lampconsole/selectAllJdpeople.action',\n          dataType:\"jsonp\",\n          jsonp: \"callback\",\n          jsonpCallback: 'jsonpCallbacksp',\n          success: function (msg) {\n            jsonpCallbacksp(msg);\n          }\n        })\n        function jsonpCallbacksp(msg) {\n          var data = msg.jList;\n          rendHotPeos(data);\n        }\n    }\n    function rendHotPeos(data) {\n      var str = '';\n      for (var i = 0, len = data.length; i < len; i++) {\n          str += '<li><a target=\"_blank\" href='+data[i].httpss+'><img src='+data[i].pic+'></a></li>'\n        }\n      $('.hotPeople .picList').html(str);\n    }\n    // 获取热门文章列表数据并渲染\n    function getHotArticles() {\n        $.ajax({\n          type: 'get',\n          url: 'http://www.lopkj.cn:8111/lampconsole/selectByHeattt.action',\n          dataType:\"jsonp\",\n          jsonp: \"callback\",\n          jsonpCallback: 'jsonpCallback1',\n          success: function (msg) {\n            jsonpCallback1(msg);\n          }\n        })\n        function jsonpCallback1(msg) {\n          var data = msg.wList;\n          rendHotArticles(data);\n        }\n    }\n    function rendHotArticles(data) {\n      var str = '';\n      for (var i = 0, len = data.length; i < len; i++) {\n          str += '<li><a target=\"_blank\" href=\"./articleDetail.html?id='+data[i].id+'\"><img src='+data[i].pic+'><h4>'+data[i].name+'</h4></a></li>'\n        }\n      $('.hotArticles .picList').html(str);\n    }\n     // 进入页面获取tags数据并更新列表\n    function initTags(pageNum) {\n       $.ajax({\n          type: 'get',\n          url: 'http://www.lopkj.cn:8111/lampconsole/selectBall.action?page='+pageNum,\n          dataType:\"jsonp\",\n          jsonp: \"callback\",\n          jsonpCallback: 'jsonpCallbackb',\n          success: function (msg) {\n             jsonpCallbackb(msg);\n          }\n      })\n      function jsonpCallbackb(msg) {\n          var data = msg.bList;\n          rendTag(data);\n      }\n    }\n    //渲染标签列表\n    function rendTag(data) {\n      if (typeof data !== 'object' || !Array.isArray(data)) {\n        return;\n      }\n      var str = '';\n      for (var i = 0, len = data.length; i < len; i++) {\n        str +=  '<a target=\"_blank\" href=\"tags.html?id='+data[i].id+'\">'+data[i].name+'</a>' ;\n      }\n      $('.hotTags .wrapper').html(str);\n    }"]}